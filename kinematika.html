<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <title>Fizika mester - Kinematika</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; max-width: 950px; margin: 20px auto; padding: 20px; background: #eceff1; }
        .card { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); }
        .mode-selector { display: flex; justify-content: center; gap: 20px; margin-bottom: 25px; background: #cfd8dc; padding: 15px; border-radius: 10px; }
        .mode-btn { padding: 12px 30px; border: none; cursor: pointer; border-radius: 8px; font-weight: bold; transition: 0.3s; }
        .mode-btn.active { background: #1a237e; color: white; transform: scale(1.05); }
        .nav-menu { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 20px; }
        .nav-btn { background: #e0e0e0; border: none; padding: 12px; cursor: pointer; border-radius: 6px; font-weight: bold; }
        .nav-btn.active { background: #2196f3; color: white; }
        .nav-btn.completed { background: #4caf50 !important; color: white; }
        .exercise-area { border: 2px solid #e1e4e8; padding: 25px; border-radius: 10px; background: #fafafa; }
        input { padding: 10px; width: 120px; border: 2px solid #ccc; border-radius: 6px; font-size: 1.1em; }
        .action-btn { background: #4caf50; color: white; border: none; padding: 12px 25px; cursor: pointer; border-radius: 6px; font-weight: bold; margin: 5px; }
        .solution { display: none; background: #fffde7; padding: 15px; border-radius: 8px; border: 1px solid #fbc02d; margin-top: 15px; line-height: 1.6; }
        .grade-box { display: none; text-align: center; padding: 30px; border: 5px solid #1a237e; border-radius: 15px; background: #e8eaf6; margin-top: 20px; }
    </style>
</head>
<body>
<div class="card">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h1 style="color: #1a237e; margin: 0;">Kinematika Oktató</h1>
        <a href="index.html" style="color: #1a237e; text-decoration: none; font-weight: bold;">← Főoldal</a>
    </div>
    <div class="mode-selector">
        <button id="m-gyak" class="mode-btn active" onclick="setMode('gyak')">Gyakorlás</button>
        <button id="m-felel" class="mode-btn" onclick="setMode('felel')">Felelés (JPG)</button>
    </div>
    <div class="nav-menu">
        <button class="nav-btn active" id="btn-uni" onclick="switchCat('uni')">Egyenletes</button>
        <button class="nav-btn" id="btn-acc" onclick="switchCat('acc')">Gyorsuló</button>
        <button class="nav-btn" id="btn-meet" onclick="switchCat('meet')">Találkozás</button>
        <button class="nav-btn" id="btn-free" onclick="switchCat('free')">Szabadesés</button>
    </div>
    <div class="exercise-area">
        <div id="exercise-text" style="font-size: 1.25em; margin-bottom: 20px;"></div>
        <div id="inputs-container"></div>
        <button class="action-btn" onclick="checkAnswers()">Ellenőrzés</button>
        <button class="action-btn" style="background:#673ab7" onclick="generateTask()">Új feladat</button>
        <button class="action-btn" style="background:#ff9800" onclick="showHelp()">Súgó</button>
        <div id="feedback" style="margin-top: 15px; font-weight: bold;"></div>
        <div id="solution-box" class="solution"></div>
    </div>
    <div id="grade-display" class="grade-box"></div>
</div>
<script>
    let mode = 'gyak', cat = 'uni', tasks = [], helpText = "", solSeen = false, tries = 0;
    let scores = { uni: 0, acc: 0, meet: 0, free: 0 }, done = { uni: false, acc: false, meet: false, free: false };

    function setMode(m) { mode = m; resetExam(); generateTask(); }
    function resetExam() { tries = 0; done = { uni:false, acc:false, meet:false, free:false }; document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('completed')); document.getElementById('grade-display').style.display='none'; }
    function switchCat(c) { cat = c; document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active')); document.getElementById('btn-'+c).classList.add('active'); generateTask(); }

    function generateTask() {
        solSeen = false; document.getElementById('feedback').innerHTML = ''; document.getElementById('solution-box').style.display = 'none';
        if(cat === 'uni') {
            let v = Math.floor(Math.random()*20)+5, t = Math.floor(Math.random()*50)+10;
            document.getElementById('exercise-text').innerHTML = `Egy autó <b>${v} m/s</b> sebességgel halad. Mekkora utat tesz meg <b>${t} s</b> alatt?`;
            tasks = [{a: v*t, label: "Út (s)", unit: "m"}]; helpText = "Használd az s = v · t képletet!";
        } else if(cat === 'acc') {
            let a = 2, t = 5;
            document.getElementById('exercise-text').innerHTML = `Egy test <b>${a} m/s²</b> gyorsulással indul. Mekkora sebességet ér el <b>${t} s</b> után?`;
            tasks = [{a: a*t, label: "Végsebesség (v)", unit: "m/s"}]; helpText = "Használd a v = a · t képletet!";
        } // További generátorok hasonlóan...
        renderInputs();
    }
    function renderInputs() { document.getElementById('inputs-container').innerHTML = tasks.map((t, i) => `<div>${t.label}: <input type="number" id="ans-${i}"> ${t.unit}</div>`).join(''); }
    function showHelp() { solSeen = true; const b = document.getElementById('solution-box'); b.innerHTML = helpText; b.style.display = 'block'; }

    function checkAnswers() {
        tries++; let ok = tasks.every((t, i) => Math.abs(parseFloat(document.getElementById(`ans-${i}`).value) - t.a) < 0.1);
        const fb = document.getElementById('feedback'); fb.innerHTML = ok ? "✅ Helyes!" : "❌ Próbáld újra!"; fb.style.color = ok ? "green" : "red";
        if(ok && mode === 'felel') { scores[cat] = solSeen ? 0.5 : 1; done[cat] = true; document.getElementById('btn-'+cat).classList.add('completed'); if(Object.values(done).every(v=>v)) finishExam(); }
    }

    function finishExam() {
        let total = Object.values(scores).reduce((a,b)=>a+b, 0);
        let grade = total >= 3.5 ? 5 : total >= 3 ? 4 : total >= 2 ? 3 : 2;
        const gd = document.getElementById('grade-display'); gd.style.display = 'block';
        gd.innerHTML = `<h2>Vizsga kész!</h2><h1>Jegy: ${grade}</h1><button class="action-btn" onclick="saveJPG('Kinematika', ${total}, ${grade})">Mentés JPG</button>`;
    }

    function saveJPG(topic, score, grade) {
        const c = document.createElement('canvas'); const ctx = c.getContext('2d'); c.width = 600; c.height = 400;
        ctx.fillStyle = '#fff'; ctx.fillRect(0,0,600,400); ctx.strokeStyle = '#1a237e'; ctx.lineWidth = 10; ctx.strokeRect(5,5,590,390);
        ctx.fillStyle = '#1a237e'; ctx.textAlign = 'center'; ctx.font = 'bold 30px Arial'; ctx.fillText('BIZONYÍTVÁNY', 300, 60);
        ctx.font = '20px Arial'; ctx.fillText(`Témakör: ${topic}`, 300, 110);
        ctx.fillText(`Pont: ${score}/4 | Próbálkozások: ${tries}`, 300, 160);
        ctx.font = 'bold 60px Arial'; ctx.fillText(`JEGY: ${grade}`, 300, 320);
        const l = document.createElement('a'); l.download = 'bizonyitvany.jpg'; l.href = c.toDataURL('image/jpeg'); l.click();
    }
    generateTask();
</script>
</body>
</html>
