<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <title>Fizika mester - Összetett Mechanika</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; max-width: 950px; margin: 20px auto; padding: 20px; background: #eceff1; }
        .card { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); }
        .input-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0; }
        .input-group { background: #cfd8dc; padding: 15px; border-radius: 8px; text-align: center; }
        .given { background: #4caf50; color: white; padding: 5px 10px; border-radius: 4px; font-weight: bold; }
        input { width: 80px; padding: 5px; font-weight: bold; }
        .action-btn { background: #1a237e; color: white; border: none; padding: 12px 25px; cursor: pointer; border-radius: 6px; font-weight: bold; margin: 5px; }
        .solution { display: none; background: #fffde7; padding: 15px; border-radius: 8px; border: 1px solid #fbc02d; margin-top: 15px; line-height: 1.8; }
    </style>
</head>
<body>
<div class="card">
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <h1 style="color: #1a237e;">Összetett Mechanika</h1>
        <a href="index.html" style="font-weight: bold; color: #1a237e; text-decoration: none;">← Főoldal</a>
    </div>
    <p>Töltsd ki a hiányzó 3 mezőt a zölddel megadott adatok alapján!</p>
    <div class="input-grid" id="fields"></div>
    <div style="text-align: center;">
        <button class="action-btn" onclick="checkComplex()">Ellenőrzés</button>
        <button class="action-btn" style="background:#673ab7" onclick="generate()">Új feladat</button>
        <button class="action-btn" style="background:#ff9800" onclick="showComplexHelp()">Szájbarágós segítség</button>
    </div>
    <div id="feedback" style="margin-top:15px; text-align: center; font-weight: bold;"></div>
    <div id="sol-box" class="solution"></div>
    <div id="grade-area" style="display:none; text-align: center; margin-top: 20px; padding: 20px; border: 3px solid #1a237e;"></div>
</div>
<script>
    let vals = {}, givenKeys = [], tries = 0;
    const labels = { m:'Tömeg (kg)', F:'Erő (N)', a:'Gyorsulás (m/s²)', t:'Idő (s)', v:'Végsebesség (m/s)', s:'Út (m)' };

    function generate() {
        tries++; document.getElementById('feedback').innerHTML = ''; document.getElementById('sol-box').style.display='none';
        let m = Math.floor(Math.random()*10)+2, a = Math.floor(Math.random()*5)+1, t = Math.floor(Math.random()*8)+2;
        vals = { m, a, t, F: m*a, v: a*t, s: 0.5*a*(t*t) };
        givenKeys = Object.keys(vals).sort(() => 0.5 - Math.random()).slice(0, 3);
        const f = document.getElementById('fields'); f.innerHTML = '';
        for(let k in labels) {
            let isG = givenKeys.includes(k);
            f.innerHTML += `<div class="input-group"><label>${labels[k]}</label><br>${isG ? `<span class="given">${vals[k].toFixed(1)}</span>` : `<input type="number" step="0.1" id="in-${k}">`}</div>`;
        }
    }

    function checkComplex() {
        let ok = true;
        for(let k in vals) if(!givenKeys.includes(k)) {
            let v = parseFloat(document.getElementById('in-'+k).value);
            if(isNaN(v) || Math.abs(v - vals[k]) > 0.2) ok = false;
        }
        const fb = document.getElementById('feedback'); fb.innerHTML = ok ? "✅ Tökéletes!" : "❌ Hiba a számításban!"; fb.style.color = ok ? "green" : "red";
        if(ok) {
            const ga = document.getElementById('grade-area'); ga.style.display = 'block';
            ga.innerHTML = `<h3>Sikeres megoldás!</h3><button class="action-btn" onclick="saveJPG()">JPG Bizonyítvány Mentése</button>`;
        }
    }

    function showComplexHelp() {
        let help = "<b>Lépésről lépésre:</b><br>";
        if(givenKeys.includes('F') && givenKeys.includes('m')) help += "1. Az F és m adatokból számold ki a gyorsulást: <b>a = F / m</b><br>";
        else if(givenKeys.includes('v') && givenKeys.includes('t')) help += "1. A v és t adatokból számold ki a gyorsulást: <b>a = v / t</b><br>";
        help += "2. Ha megvan az 'a', a többi képlet (v=a·t, s=a/2·t²) már csak behelyettesítés!";
        const sb = document.getElementById('sol-box'); sb.innerHTML = help; sb.style.display = 'block';
    }

    function saveJPG() {
        const c = document.createElement('canvas'); const ctx = c.getContext('2d'); c.width = 600; c.height = 400;
        ctx.fillStyle = '#f9f9f9'; ctx.fillRect(0,0,600,400); ctx.strokeStyle = '#1a237e'; ctx.lineWidth = 8; ctx.strokeRect(10,10,580,380);
        ctx.fillStyle = '#1a237e'; ctx.textAlign = 'center'; ctx.font = 'bold 32px Arial'; ctx.fillText('MECHANIKA BIZONYÍTVÁNY', 300, 80);
        ctx.font = '20px Arial'; ctx.fillText('Témakör: Összetett Mechanika (Híd)', 300, 140);
        ctx.fillText(`Próbálkozások száma: ${tries}`, 300, 190);
        ctx.font = 'bold 50px Arial'; ctx.fillText('Értékelés: KIVÁLÓ', 300, 310);
        const l = document.createElement('a'); l.download = 'mechanika_cert.jpg'; l.href = c.toDataURL('image/jpeg'); l.click();
    }
    generate();
</script>
</body>
</html>

